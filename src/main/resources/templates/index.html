<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<meta charset="UTF-8">
<body prefix="location: <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> 
			station: <http://www.w3.org/2000/01/rdf-schema#Stations> 
			station_id: <http://www.w3.org/2000/01/rdf-schema#station_id> 
			name: <http://www.w3.org/2000/01/rdf-schema#name> 
			lat: <http://www.opengis.net/ont/geosparql#lat> 
			lon: <http://www.opengis.net/ont/geosparql#lon> 
			capacity: <http://www.w3.org/2000/01/rdf-schema#capacity> 
			num_available_bikes: <http://www.w3.org/2000/01/rdf-schema#nb_velos_dispos> 
			station_lyon: <http://www.w3.org/2000/01/rdf-schema#stations_lyon> 
			station_stetienne: <http://www.w3.org/2000/01/rdf-schema#stations_st_etienne> 
			station_paris: <http://www.w3.org/2000/01/rdf-schema#stations_paris> 
			station_strasbourg: <http://www.w3.org/2000/01/rdf-schema#stations_strasbourg> 
			station_montpellier: <http://www.w3.org/2000/01/rdf-schema#stations_montpellier> 
			station_rennes: <http://www.w3.org/2000/01/rdf-schema#stations_rennes> "
		about="http://www.w3.org/2000/01/rdf-schema#stations_st_etienne">
	
	<h1 th:text="${top}"></h1>
	
	<div id="googleMap" style="width:100%;height:700px;">
	
	</div>
	
	<input type="button" value="Saint-Etienne" onclick="stetienne()">
	<input type="button" value="Lyon" onclick="lyon()">
	<input type="button" value="Paris" onclick="paris()">
	<input type="button" value="Strasbourg" onclick="strasbourg()">
	<input type="button" value="Montpellier" onclick="montpellier()">
	<input type="button" value="Rennes" onclick="rennes()">
	
	<script th:inline="javascript">	
		var mapProp;
		var map;
		
		function myMap() {
			mapProp= {
				center:new google.maps.LatLng(45.436238,4.388181),
				zoom:14,
			};
			
			map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
			
			//Stations display - BEG
				//marker.setMap(map);
			//Stations display - END
		}
		
		function stetienne(){
			map.setCenter({lat: 45.441118, lng: 4.386193});
			map.setZoom(12);
			
			var bicycles = [[${stations_stetienne}]];

			for (i = 0; i < bicycles.length; i++) {
				
				var marker = new google.maps.Marker({
				    position: new google.maps.LatLng(bicycles[i].latitude, bicycles[i].longitude),
				    title: "Station : "+bicycles[i].name+
				    		"\nCapacity : "+bicycles[i].capacity+
				    		"\nAvailable bikes : "+bicycles[i].available_bikes
				});
				marker.setMap(map);
		    }
			
		}
		
		function lyon(){
			map.setCenter({lat: 45.754427, lng: 4.836244});
			map.setZoom(12);
		}
		
		function paris(){
			map.setCenter({lat: 48.859950, lng: 2.339508});
			map.setZoom(12);
		}
		
		function strasbourg(){
			map.setCenter({lat: 48.577028, lng: 7.753177});
			map.setZoom(12);
		}
		
		function montpellier(){
			map.setCenter({lat: 43.609016, lng: 3.877938});
			map.setZoom(12);
		}
		
		function rennes(){
			map.setCenter({lat: 48.113036, lng: -1.676784});
			map.setZoom(12);
		}
	</script>
	
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD_XYaw05uILoBPpkEslhw7p3Rt1WccWPg&callback=myMap&region=FR"></script>

	<!-- 
	<div about="http://www.w3.org/2000/01/rdf-schema#stations_st_etienne" typeof="rdf-schema:station_stetienne" th:each="stations_stetienne : ${stations_stetienne}">
		<p property="name:stat_name" th:if="${stations_stetienne.location == 'stetienne'}" th:text=${stations_stetienne.name}></p>
	</div>
	 -->
	<table>
	  <tr>
	    <th>Station name</th>
	    <th>| City name</th>
	    <th>| Capacity |</th>
	    <th>Available bikes</th>
	  </tr>
	  <tr typeof="rdf-schema:station_stetienne"	th:each="stations_stetienne : ${stations_stetienne}">
	  	<td property="name:station_name" th:if="${stations_stetienne.location == 'stetienne'}" th:text=${stations_stetienne.name}></td>
	    <td property="location:city_name" th:if="${stations_stetienne.location == 'stetienne'}" th:text=${stations_stetienne.location}></td>
	    <td property="capacity:capacity" th:if="${stations_stetienne.location == 'stetienne'}" th:text=${stations_stetienne.capacity}></td>
	    <td property="num_available_bikes:nb_bikes" th:if="${stations_stetienne.location == 'stetienne'}" th:text=${stations_stetienne.available_bikes}></td>
	  </tr>
	</table>

</body>
</html> 